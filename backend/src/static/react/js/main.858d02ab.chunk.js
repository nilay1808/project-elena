(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{161:function(e,t){},219:function(e,t,a){e.exports=a(325)},225:function(e,t,a){},226:function(e,t,a){},321:function(e,t){},325:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(90),l=a.n(o),i=(a(224),a(225),a(57)),c=a(58),s=a(124),u=a(64),h=a(63),p=(a(226),a(158)),d=a.n(p),m=a(193),g=a(194),E=a(20),f=a(126),v=a(42),b=a(141),w=a(196),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={start:"",dest:"",goal:"Minimize Elevation Gain",limit:"0",algorithm:"AStar",method:"drive"},e.handleChange=function(t){e.setState(Object(g.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.updateLoading(),fetch("/route",{method:"POST",body:JSON.stringify(e.state)}).then(function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200===a.status){t.next=7;break}return t.next=3,a.json();case 3:throw n=t.sent,new Error(n.error);case 7:return t.next=9,a.json();case 9:r=t.sent,e.props.updateData(r),e.setState({loading:!1});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.props.updateErrorMsg(t.toString())}))},e.updateLoading=function(){e.props.updateLoading()},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{body:!0,style:{width:"400px",background:"rgba(0, 0, 0, 0.5)",color:"#ffffff",marginTop:"2.5%",marginLeft:"5%"}},r.a.createElement(E.a,{onSubmit:function(t){e.handleSubmit(t)}},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"start"},r.a.createElement(E.a.Label,null,"Start Location"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter start location",value:this.state.start,onChange:function(t){e.handleChange(t)}}))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"dest"},r.a.createElement(E.a.Label,null,"End Location"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter end location",value:this.state.dest,onChange:function(t){e.handleChange(t)}}))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"algorithm"},r.a.createElement(E.a.Label,null,"Algorithm"),r.a.createElement(E.a.Control,{as:"select",value:this.state.algorithm,onChange:function(t){e.handleChange(t)}},r.a.createElement("option",null,"AStar"),r.a.createElement("option",null,"Breadth First Search"),r.a.createElement("option",null,"Dijkstra")))),r.a.createElement(E.a.Row,{hidden:"Breadth First Search"===this.state.algorithm},r.a.createElement(E.a.Group,{as:v.a,controlId:"goal"},r.a.createElement(E.a.Label,null,"Optimization"),r.a.createElement(E.a.Control,{as:"select",value:this.state.goal,onChange:function(t){e.handleChange(t)}},r.a.createElement("option",null,"Minimize Elevation Gain"),r.a.createElement("option",null,"Maximize Elevation Gain"),r.a.createElement("option",null,"Maximize Steepness"),r.a.createElement("option",null,"Minimize Steepness")))),r.a.createElement(E.a.Row,{hidden:"Breadth First Search"===this.state.algorithm},r.a.createElement(E.a.Group,{as:v.a,controlId:"limit"},r.a.createElement(E.a.Label,null,"Deviation Limit (x%)"),r.a.createElement(E.a.Control,{type:"number",placeholder:"x%",value:this.state.limit,onChange:function(t){e.handleChange(t)}}))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"method"},r.a.createElement(E.a.Label,null,"Transportation Method"),r.a.createElement(E.a.Control,{as:"select",value:this.state.method,onChange:function(t){e.handleChange(t)}},r.a.createElement("option",null,"drive"),r.a.createElement("option",null,"bike"),r.a.createElement("option",null,"walk")))),r.a.createElement(E.a.Row,{className:"justify-content-md-center"},r.a.createElement(f.a,{variant:"light",type:"submit"},this.props.loading?r.a.createElement(w.a,{animation:"border"}):"Submit"))))}}]),a}(n.Component),S=a(197),C={scales:{xAxes:[{ticks:{display:!1}}]}},M={display:!1},I={labels:[],datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[10,11]}]},j=[],k=0,L=0,O=0,x=0,T=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).update=function(e){if(k=0,O=0,x=0,0!==e.length){var t=e[0].path,a=e[0].path_data,n=[],r=[],o=0;L=0;for(var l=0;l<t.length;l++){var i=t[l][0],c=t[l][1],s=a[l].length,u=a[l].grade,h=a[l].elevation;o+=s,u>L&&(L=u),l!==t.length-1&&(O+=u,a[l+1].elevation-h>0&&(x+=a[l+1].elevation-h)),n.push(c+", "+i),r.push(h)}I.labels=n,I.datasets[0].data=r,O/=t.length,k=o}},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.data;return e!==j&&(this.update(e),j=e),r.a.createElement(b.a,{body:!0,style:0===k?{width:"350px",background:"rgba(0, 0, 0, 0.5)",color:"#ffffff",marginTop:"5%",marginLeft:"5%",opacity:0}:{width:"350px",background:"rgba(0, 0, 0, 0.75)",color:"#ffffff",marginTop:"5%",marginLeft:"5%",opacity:100}},r.a.createElement(E.a,null,r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"totalDist"},r.a.createElement(E.a.Label,null,"Total Distance"),r.a.createElement("br",null),r.a.createElement(E.a.Label,null,(k/1e3).toFixed(3)," Kilometers"))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"dest"},r.a.createElement(E.a.Label,null,"Steepest Incline"),r.a.createElement("br",null),r.a.createElement(E.a.Label,null,(10*L).toFixed(3)," Vertical Meters per 10 Meters"))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"dest"},r.a.createElement(E.a.Label,null,"Total Elevation Gain"),r.a.createElement("br",null),r.a.createElement(E.a.Label,null,x," Meters"))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"dest"},r.a.createElement(E.a.Label,null,"Average Incline"),r.a.createElement("br",null),r.a.createElement(E.a.Label,null,(10*O).toFixed(3)," Vertical Meters per 10 Meters"))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Group,{as:v.a,controlId:"graph"},r.a.createElement(E.a.Label,null,"Elevation Graph"),r.a.createElement(S.a,{data:I,legend:M,options:C})))))}}]),a}(n.Component),G=a(206),N=a(339),D=a(343),R=a(344),z=a(202),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.data;var a=function(e,t,a){return function(e){var t,a;return e<50?(a=255,t=Math.round(5.1*e)):(t=255,a=Math.round(510-5.1*e)),[t,a,0]}(100*(e.path_data[0].grade-t)/(a-t))},n=[],o=[];t[0]&&t[0].path&&function(){var e,r=t[0],l=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,c=Object(G.a)(r.path_data);try{for(c.s();!(e=c.n()).done;){var s=e.value;s.grade<l&&(l=s.grade),s.grade>i&&(i=s.grade)}}catch(g){c.e(g)}finally{c.f()}for(var u=0;u<r.path.length;u++){if(0===u){var h={name:"Start",coordinates:r.path[u]};n.push(h)}else if(u===r.path.length-1){var p={name:"Destination",coordinates:r.path[u]};n.push(p);continue}var d=[{color:r.color,name:r.name,path:r.path.slice(u,u+2),path_data:r.path_data.slice(u,u+2)}],m=new D.a({id:"path-layer"+String(u),data:d,pickable:!0,widthScale:5,widthMinPixels:2,getColor:function(e){return a(e,l,i)}});o.push(m)}}();for(var l=0;l<2;l++)n[l]=new R.a({id:"pin-layer",data:n[l],pickable:!0,getIcon:function(e){return{url:"https://img.icons8.com/color/50/000000/map-pin.png",width:128,height:128,anchorY:128}},sizeScale:15,getPosition:function(e){return e.coordinates},getSize:function(e){return 5}});var i={top:"auto",left:"auto",zIndex:"0",marginTop:this.props.marginTop};return r.a.createElement(N.a,{viewState:this.props.viewport,onViewStateChange:function(t){e.props._onViewStateChange(t)},controller:!0,layers:[].concat(o,n),width:this.props.width,height:this.props.height,style:i},r.a.createElement(z.a,{mapStyle:"mapbox://styles/mapbox/dark-v10",onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:"pk.eyJ1IjoibmlsYXkxODA4IiwiYSI6ImNrOG1iaXp0cjBkeTEzZm12N3l3ODJweWEifQ.TDhSzGcCsjt5CsVRljpcrw"}))}}]),a}(r.a.Component),V=a(99),_=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(V.a,{show:this.props.showError},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Title,null,"Error")),r.a.createElement(V.a.Body,null,r.a.createElement("p",null,this.props.errorMsg)),r.a.createElement(V.a.Footer,null,r.a.createElement(f.a,{variant:"danger",onClick:function(){e.props.clearError()}},"Close")))}}]),a}(n.Component),A=a(338),F=a(163),H=a(162),P=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateData=function(e){var t=[];t.push(e),n.setState({data:t});var a=Math.max(Math.floor((e.path.length-1)/2),0),r=e.path[a],o=n.state.viewport,l=n.calculateZoom(e.path);o.latitude=r[1],o.longitude=r[0],o.zoom=l,o.transitionDuration=5e3,o.transitionInterpolator=new A.a,n.setState({viewport:o}),n.updateLoading(),n.updateHeight()},n.updateHeight=function(){"100vh"===n.state.height?n.setState({height:"99vh",marginTop:"1vh"}):n.setState({height:"100vh",marginTop:"0vh"})},n.updateErrorMsg=function(e){n.setState({errorMsg:e,showError:!0})},n.updateLoading=function(){var e=n.state.loading;n.setState({loading:!e})},n.clearError=function(){n.setState({errorMsg:"No errors",showError:!1}),n.updateLoading()},n.calculateZoom=function(e){var t=e[0],a=e[e.length-1],r=n.haversine(t[1],t[0],a[1],a[0]);return console.log("dist: "+r),r<=1500?14:r<=5e3?12:r<=15e3?11.5:r<=35e3?11:r<=65e3?10:8},n.haversine=function(e,t,a,n){var r=e*Math.PI/180,o=a*Math.PI/180,l=(a-e)*Math.PI/180,i=(n-t)*Math.PI/180,c=Math.sin(l/2)*Math.sin(l/2)+Math.cos(r)*Math.cos(o)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},n.state={data:[],viewport:{latitude:42.20515744581611,longitude:-72.19204888633023,zoom:7.5,bearing:0,pitch:0},height:"99vh",width:"100vw",marginTop:"1vh",errorMsg:"No errors",showError:!1,loading:!1},n._onViewStateChange=n._onViewStateChange.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"_onViewStateChange",value:function(e){var t=e.viewState;this.setState({viewport:t})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App",style:{background:"rgb(23, 24, 24)",position:"relative",alignItems:"bottom"}},r.a.createElement("div",{style:{zIndex:0,position:"absolute"}},r.a.createElement(B,{data:this.state.data,viewport:this.state.viewport,_onViewStateChange:this._onViewStateChange,height:this.state.height,width:this.state.width,marginTop:this.state.marginTop})),r.a.createElement("div",{style:{zIndex:9,height:"100vh"}},r.a.createElement(F.a,{variant:"dark",style:{height:"8vh",background:"rgba(0, 0, 0, 0.5)"},className:"ml-auto"},r.a.createElement(F.a.Brand,{style:{marginLeft:"15px"}},"EleNa: Elevation-based Navigation"),r.a.createElement(H.a,{className:"ml-auto"},r.a.createElement(H.a.Link,{href:"https://github.com",style:{borderLeft:"solid 1px grey"}},"Github"))),r.a.createElement(_,{showError:this.state.showError,errorMsg:this.state.errorMsg,clearError:this.clearError}),r.a.createElement("div",null,r.a.createElement(y,{className:"userInput",updateData:this.updateData,payload:this.state,updateErrorMsg:this.updateErrorMsg,loading:this.state.loading,updateLoading:this.updateLoading})),r.a.createElement("div",{style:{position:"absolute",right:"5%",top:"12.5%"}},r.a.createElement(T,{className:"routeData",data:this.state.data}))))}}]),a}(n.Component);l.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.858d02ab.chunk.js.map