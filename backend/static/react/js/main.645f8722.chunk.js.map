{"version":3,"sources":["components/UserInput.js","components/MapView.js","App.js","index.js"],"names":["UserInput","state","start","dest","goal","limit","algorithm","loading","handleChange","e","setState","target","id","value","handleSubmit","preventDefault","console","log","fetch","method","body","JSON","stringify","then","res","a","json","data","props","updateData","catch","err","Card","style","width","background","color","marginTop","marginLeft","Form","onSubmit","Row","Group","as","Col","controlId","Label","Control","type","placeholder","this","onChange","className","Button","variant","Spinner","animation","Component","MapView","path","PathLayer","pickable","widthScale","widthMinPixels","getColor","startPin","IconLayer","startPinData","name","address","exits","coordinates","getIcon","d","url","height","anchorY","Math","sqrt","top","left","zIndex","viewState","viewport","onViewStateChange","v","_onViewStateChange","controller","layers","mapStyle","onViewportChange","mapboxApiAccessToken","React","App","resp","push","len","max","floor","length","zoom","calculateZoom","FlyToInterpolator","updateHeight","end","dist","haversine","lat1","lon1","lat2","lon2","φ1","PI","φ2","Δφ","Δλ","sin","cos","atan2","latitude","longitude","bearing","pitch","bind","position","alignItems","Navbar","Brand","Nav","Link","href","borderLeft","payload","ReactDOM","render","document","getElementById"],"mappings":"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","file":"js/main.645f8722.chunk.js","sourcesContent":["  \nimport React, { Component } from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\n\nexport default class UserInput extends Component {\n\tstate = {\n\t\tstart: \"\",\n\t\tdest: \"\",\n\t\tgoal: \"Minimize Elevation Gain\",\n\t\tlimit: \"0\",\n\t\talgorithm: \"Uniform Cost Search\",\n\t\tloading: false\n\t};\n\n\thandleChange = (e) => {\n\t\tthis.setState({\n\t\t\t[e.target.id]: e.target.value,\n\t\t});\n\t};\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(this.state);\n\t\tthis.setState({ loading: true })\n\t\tconst resp = {\n\t\t\tpath: [\n\t\t\t\t[-71.1188219, 42.373674],\n\t\t\t\t[-71.1185058, 42.3733081],\n\t\t\t\t[-71.1193483, 42.3722633],\n\t\t\t\t[-71.1196139, 42.371766],\n\t\t\t\t[-71.1188907, 42.3714467],\n\t\t\t\t[-71.1181625, 42.3711969],\n\t\t\t\t[-71.117355, 42.3709216],\n\t\t\t\t[-71.1177529, 42.3702542],\n\t\t\t\t[-71.1181448, 42.3695963],\n\t\t\t\t[-71.1173632, 42.3692173],\n\t\t\t\t[-71.1176905, 42.3689022],\n\t\t\t\t[-71.1192636, 42.3674198],\n\t\t\t\t[-71.1190646, 42.3673015],\n\t\t\t\t[-71.1190093, 42.3673493],\n\t\t\t\t[-71.1183064, 42.3641648],\n\t\t\t\t[-71.1181752, 42.3641617],\n\t\t\t\t[-71.1178261, 42.3641803],\n\t\t\t\t[-71.1174531, 42.3610148],\n\t\t\t\t[-71.1159585, 42.3614839],\n\t\t\t\t[-71.1159469, 42.3613844],\n\t\t\t\t[-71.1158914, 42.3609058],\n\t\t\t\t[-71.1158388, 42.3605355],\n\t\t\t\t[-71.1157603, 42.3599819],\n\t\t\t\t[-71.1156712, 42.3593559],\n\t\t\t\t[-71.1156049, 42.3589434],\n\t\t\t\t[-71.1155893, 42.3588461],\n\t\t\t\t[-71.1155789, 42.3587842],\n\t\t\t\t[-71.115466, 42.358271],\n\t\t\t\t[-71.1153278, 42.357783],\n\t\t\t\t[-71.1150425, 42.3578433],\n\t\t\t\t[-71.1148799, 42.3574523],\n\t\t\t\t[-71.1150374, 42.3574058],\n\t\t\t\t[-71.1141339, 42.3563464],\n\t\t\t\t[-71.1140682, 42.3562989],\n\t\t\t\t[-71.1111139, 42.3546657],\n\t\t\t\t[-71.1108949, 42.3546324],\n\t\t\t\t[-71.1111251, 42.3540455],\n\t\t\t\t[-71.1105129, 42.3534874],\n\t\t\t\t[-71.1109194, 42.3506323],\n\t\t\t\t[-71.1096727, 42.350488],\n\t\t\t\t[-71.1066732, 42.3501335],\n\t\t\t\t[-71.1065493, 42.3501181],\n\t\t\t\t[-71.1064049, 42.3501002],\n\t\t\t\t[-71.1063793, 42.3502285],\n\t\t\t\t[-71.1062435, 42.3504679],\n\t\t\t\t[-71.1061893, 42.3508483],\n\t\t\t\t[-71.1059991, 42.3507388],\n\t\t\t\t[-71.1055298, 42.3509986],\n\t\t\t],\n\t\t\tname: \"Route 1\",\n\t\t\tcolor: [255, 255, 255],\n\t\t};\n\t\t// this.props.updateData(resp); \n\t\tfetch('/route',{\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(this.state)\n\t\t})\n\t\t.then(async res => {\n\t\t\tlet data = await res.json();\n\t\t\tconsole.log(data);\n\t\t\tthis.props.updateData(data);\n\t\t\tthis.setState({ loading: false })\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(err);\n\t\t})\n\n\n\t\t// axios\n\t\t// \t.post(\"/route\", this.state)\n\t\t// \t.then(res => {\n\t\t// \t\tconsole.log(res);\n\t\t// \t\t// this.props.updateData(res)\n\t\t// \t})\n\t\t// \t.catch(err => {\n\t\t// \t\tconsole.log(err);\n\t\t// \t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Card\n\t\t\t\tbody\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: \"400px\",\n\t\t\t\t\tbackground: \"rgba(0, 0, 0, 0.5)\",\n\t\t\t\t\tcolor: \"#ffffff\",\n\t\t\t\t\tmarginTop: \"5%\",\n\t\t\t\t\tmarginLeft: \"5%\"\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Form\n\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\tthis.handleSubmit(e);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Form.Row>\n\t\t\t\t\t\t<Form.Group as={Col} controlId=\"start\">\n\t\t\t\t\t\t\t<Form.Label>Start Location</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Enter start location\"\n\t\t\t\t\t\t\t\tvalue={this.state.start}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleChange(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t<Form.Row>\n\t\t\t\t\t\t<Form.Group as={Col} controlId=\"dest\">\n\t\t\t\t\t\t\t<Form.Label>End Location</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Enter end location\"\n\t\t\t\t\t\t\t\tvalue={this.state.dest}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleChange(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t<Form.Row>\n\t\t\t\t\t\t<Form.Group as={Col} controlId=\"algorithm\">\n\t\t\t\t\t\t\t<Form.Label>Algorithm</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tas=\"select\"\n\t\t\t\t\t\t\t\tvalue={this.state.algorithm}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleChange(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option>Uniform Cost Search</option>\n\t\t\t\t\t\t\t\t<option>A Star</option>\n\t\t\t\t\t\t\t\t<option>Breadth First Search</option>\n\t\t\t\t\t\t\t</Form.Control>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t<Form.Row>\n\t\t\t\t\t\t<Form.Group as={Col} controlId=\"goal\">\n\t\t\t\t\t\t\t<Form.Label>Optimization</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tas=\"select\"\n\t\t\t\t\t\t\t\tvalue={this.state.goal}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleChange(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option>Minimize Elevation Gain</option>\n\t\t\t\t\t\t\t\t<option>Maximize Elevation Gain</option>\n\t\t\t\t\t\t\t</Form.Control>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t<Form.Row>\n\t\t\t\t\t\t<Form.Group as={Col} controlId=\"limit\">\n\t\t\t\t\t\t\t<Form.Label>Deviation Limit (x%)</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tplaceholder=\"x%\"\n\t\t\t\t\t\t\t\tvalue={this.state.limit}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleChange(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t<Form.Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t<Button variant=\"light\" type=\"submit\">\n\t\t\t\t\t\t\t{this.state.loading ? <Spinner animation=\"border\" /> : \"Submit\"}\n\t\t\t\t\t\t\t{/* <Spinner animation=\"border\" /> */}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Form.Row>\n\t\t\t\t</Form>\n\t\t\t</Card>\n\t\t);\n\t}\n}","import React from \"react\";\nimport DeckGL from \"@deck.gl/react\";\nimport { PathLayer, IconLayer } from \"@deck.gl/layers\";\nimport { StaticMap } from \"react-map-gl\";\n\n// Set your mapbox access token here\nconst MAPBOX_TOKEN =\n\t\"pk.eyJ1IjoibmlsYXkxODA4IiwiYSI6ImNrOG1iaXp0cjBkeTEzZm12N3l3ODJweWEifQ.TDhSzGcCsjt5CsVRljpcrw\";\n\n// Data to be used by the LineLayer\n// const data =\n\nexport default class MapView extends React.Component {\n\trender() {\n\t\tconst data = this.props.data;\n\n\t\tconst path = new PathLayer({\n\t\t\tid: \"path-layer\",\n\t\t\tdata,\n\t\t\tpickable: true,\n\t\t\twidthScale: 5,\n\t\t\twidthMinPixels: 2,\n\t\t\tgetColor: [255, 255, 255],\n\t\t});\n\n\t\tconst startPinData = [\n\t\t\t{\n\t\t\t\tname: \"Colma (COLM)\",\n\t\t\t\taddress: \"365 D Street, Colma CA 94014\",\n\t\t\t\texits: 4214,\n\t\t\t\tcoordinates: [42.20515744581611, -72.19204888633023],\n\t\t\t},\n\t\t];\n\n\t\tconst ICON_MAPPING = {\n\t\t\tmarker: {x: 0, y: 0, width: 32, height: 32, mask: true}\n\t\t  };\n\n\t\tconst startPin = new IconLayer({\n\t\t\tid: \"icon-layer\",\n\t\t\tstartPinData,\n\t\t\tpickable: true,\n\t\t\t// iconAtlas and iconMapping are required\n\t\t\t// getIcon: return a string\n\t\t\tgetIcon: d => ({\n\t\t\t\turl: \"https://img.icons8.com/color/50/000000/map-pin.png\",\n\t\t\t\twidth: 128,\n\t\t\t\theight: 128,\n\t\t\t\tanchorY: 128\n\t\t\t  }),\n\t\t\n\t\t\tgetIcon: d => 'marker',\n\n\t\t\tsizeScale: 15,\n\t\t\tgetPosition: d => d.coordinates,\n\t\t\tgetSize: d => 5,\n\t\t\tgetColor: d => [Math.sqrt(d.exits), 140, 0],\n\t\t});\n\n\t\tlet style = {\n\t\t\ttop: \"auto\",\n\t\t\tleft: \"auto\",\n\t\t\tzIndex: \"0\",\n\t\t\tmarginTop: this.props.marginTop,\n\t\t};\n\n\t\treturn (\n\t\t\t<DeckGL\n\t\t\t\t// initialViewState={this.props.viewport}\n\t\t\t\tviewState={this.props.viewport}\n\t\t\t\tonViewStateChange={(v) => {\n\t\t\t\t\tthis.props._onViewStateChange(v);\n\t\t\t\t}}\n\t\t\t\tcontroller={true}\n\t\t\t\tlayers={ [path, startPin] }\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t\tstyle={style}\n\t\t\t>\n\t\t\t\t<StaticMap\n\t\t\t\t\tmapStyle=\"mapbox://styles/mapbox/dark-v10\"\n\t\t\t\t\tonViewportChange={(viewport) => this.setState({ viewport })}\n\t\t\t\t\tmapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t/>\n\t\t\t</DeckGL>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport \"./styles/App.css\";\n\nimport UserInput from \"./components/UserInput\";\nimport MapView from \"./components/MapView\";\n\nimport { FlyToInterpolator } from \"@deck.gl/core\";\n\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Nav from \"react-bootstrap/Nav\";\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: [],\n\t\t\tviewport: {\n\t\t\t\tlatitude: 42.20515744581611,\n\t\t\t\tlongitude: -72.19204888633023,\n\t\t\t\tzoom: 7.5,\n\t\t\t\tbearing: 0,\n\t\t\t\tpitch: 0,\n\t\t\t},\n\t\t\theight: \"99vh\",\n\t\t\twidth: \"100vw\",\n\t\t\tmarginTop: \"1vh\"\n\t\t};\n\t\tthis._onViewStateChange = this._onViewStateChange.bind(this);\n\t}\n\n\tupdateData = (d) => {\n\t\tconsole.log(\"update\");\n\t\tconst resp = [];\n\t\tresp.push(d);\n\t\tthis.setState({ data: resp });\n\n\t\tlet len = Math.max(Math.floor((d.path.length - 1) / 2), 0);\n\t\tconst coordinates = d.path[len];\n\t\tlet viewport = this.state.viewport;\n\n\t\tlet zoom = this.calculateZoom(d.path);\n\n\t\tviewport[\"latitude\"] = coordinates[1];\n\t\tviewport[\"longitude\"] = coordinates[0];\n\t\tviewport[\"zoom\"] = zoom;\n\t\tviewport[\"transitionDuration\"] = 5000;\n\t\tviewport[\"transitionInterpolator\"] = new FlyToInterpolator();\n\n\t\tthis.setState({ viewport: viewport });\n\t\tconsole.log(this.state);\n\n\t\t// Required to update viewport\n\t\tthis.updateHeight();\n\t};\n\n\t_onViewStateChange({ viewState }) {\n\t\tthis.setState({ viewport: viewState });\n\t}\n\n\tupdateHeight = () => {\n\t\tif(this.state.height === \"100vh\") {\n\t\t\tthis.setState({ height: \"99vh\", marginTop: \"1vh\" });\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ height: \"100vh\", marginTop: \"0vh\" });\n\t\t}\n\t};\n\n\tcalculateZoom = (path) => {\n\t\tlet start = path[0]\n\t\tlet end = path[path.length - 1]\n\n\t\tlet dist = this.haversine(start[1], start[0], end[1], end[0]);\n\n\t\tconsole.log(dist);\n\n\t\tif(dist <= 1500) {\n\t\t\treturn 14.5;\n\t\t}\n\t\tif(dist <= 5000) {\n\t\t\treturn 13;\n\t\t}\n\t\tif(dist <= 15000) {\n\t\t\treturn 12;\n\t\t}\n\t\t\n\t\treturn 10;\n\t}\n\n\n\n\thaversine = (lat1, lon1, lat2, lon2) => {\n\t\tlet R = 6371e3; // metres\n\t\tlet φ1 = lat1 * Math.PI / 180;\n\t\tlet φ2 = lat2 * Math.PI / 180;\n\t\tlet Δφ = (lat2-lat1) * Math.PI / 180;\n\t\tlet Δλ = (lon2-lon1) * Math.PI / 180;\n\n\t\tlet a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t\t\tMath.cos(φ1) * Math.cos(φ2) *\n\t\t\t\tMath.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tlet c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\tlet d = R * c;\n\n\t\treturn d\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"App\"\n\t\t\t\tstyle={\n\t\t\t\t\t\n\t\t\t\t\t{ background: \"rgb(23, 24, 24)\", position: \"relative\", alignItems: \"bottom\" }\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div style={{ zIndex: 0, position: \"absolute\" }}>\n\t\t\t\t\t<MapView\n\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\tviewport={this.state.viewport}\n\t\t\t\t\t\t_onViewStateChange={this._onViewStateChange}\n\t\t\t\t\t\theight={this.state.height}\n\t\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\t\tmarginTop={this.state.marginTop}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ zIndex: 9, height: \"100vh\" }}>\n\t\t\t\t\t<Navbar\n\t\t\t\t\t\tvariant=\"dark\"\n\t\t\t\t\t\tstyle={{ height: \"8vh\", background: \"rgba(0, 0, 0, 0.5)\", }}\n\t\t\t\t\t\tclassName=\"ml-auto\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Navbar.Brand style={{ marginLeft: \"15px\" }}>\n\t\t\t\t\t\t\tEleNa: Elevation-based Navigation\n\t\t\t\t\t\t</Navbar.Brand>\n\t\t\t\t\t\t<Nav className=\"ml-auto\">\n\t\t\t\t\t\t\t<Nav.Link\n\t\t\t\t\t\t\t\thref=\"https://github.com\"\n\t\t\t\t\t\t\t\tstyle={{ borderLeft: \"solid 1px grey\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tGithub\n\t\t\t\t\t\t\t</Nav.Link>\n\t\t\t\t\t\t</Nav>\n\t\t\t\t\t</Navbar>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<UserInput\n\t\t\t\t\t\t\tclassName=\"userInput\"\n\t\t\t\t\t\t\tupdateData={this.updateData}\n\t\t\t\t\t\t\tpayload={this.state}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./styles/index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}